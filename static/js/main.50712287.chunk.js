(this["webpackJsonpinternship-task-react"]=this["webpackJsonpinternship-task-react"]||[]).push([[0],{46:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(10),c=n.n(r),s=n(6),i=(n(46),n(47),"LOAD_EVENTS"),l="DELETE_EVENT ",o="ON_EVENT_DELETE ",u="CLOSE_POPUP",j="GET_PARTICIPANT_FROM_FILTER",d="GET_AUTH_USER",b="LOGIN",v="POST_NEW_EVENT",f="SHOW_NEW_EVENT_FORM",O="CHECK_DUPLICATE",p=function(){return{type:u}},m=n(1),h=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.isAdmin}));return Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsx)("h1",{children:"Calendar"}),Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)("div",{className:"mr-3",children:Object(m.jsxs)("select",{className:"custom-select users-filter",onChange:function(t){var n;e((n=t.target.value,{type:j,user:n}))},children:[Object(m.jsx)("option",{value:"All members",children:"All members"}),Object(m.jsx)(U,{})]})}),Object(m.jsx)("div",{children:t&&Object(m.jsx)("button",{type:"button",className:"btn btn-secondary new-event",onClick:function(){return e({type:f})},children:"New Event +"})})]})]})},x=(n(49),n(8)),y=n.n(x),N=n(13),w=n(33),E=n(18),T=n.n(E),P=new function e(){var t=this;Object(w.a)(this,e),this._apiBase="http://158.101.166.74:8080/api/data/prokofievaK/event",this.postNewEvent=function(){var e=Object(N.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(t._apiBase,t._createDataObj(n));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllEvents=Object(N.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(t._apiBase);case 2:if(null!==(n=e.sent).data){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",n.data.map(t._transformEvents));case 8:case"end":return e.stop()}}),e)}))),this.deleteEvent=function(){var e=Object(N.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.delete("".concat(t._apiBase,"/").concat(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.putEvent=function(){var e=Object(N.a)(y.a.mark((function e(n,a){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.put("".concat(t._apiBase,"/").concat(n),t._createDataObj(a));case 2:return r=e.sent,e.abrupt("return",t._transformEvent(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this._transformEvents=function(e){var t=JSON.parse(e.data),n=t.eventText,a=t.day,r=t.time,c=t.participants;return{id:e.id,eventText:n,day:a,time:r,participants:c}},this._transformEvent=function(e){var t=JSON.parse(e.data.data);return{eventText:t.eventText,day:t.day,time:t.time,participants:t.participants}},this._createDataObj=function(e){return JSON.stringify({data:JSON.stringify(e),id:"test"})}},g=[{name:"Kate Prokofieva",isAdmin:!0,id:1},{name:"Alex Prokofiev",isAdmin:!1,id:2},{name:"Peter Smolic",isAdmin:!1,id:3},{name:"Hana Carpenter",isAdmin:!1,id:4}],C=[{fullTime:"10:00",value:"10"},{fullTime:"11:00",value:"11"},{fullTime:"12:00",value:"12"},{fullTime:"13:00",value:"13"},{fullTime:"14:00",value:"14"},{fullTime:"15:00",value:"15"},{fullTime:"16:00",value:"16"},{fullTime:"17:00",value:"17"},{fullTime:"18:00",value:"18"}],k=[{fullDay:"Monday",value:"mon"},{fullDay:"Tuesday",value:"tue"},{fullDay:"Wednesday",value:"wed"},{fullDay:"Thursday",value:"thu"},{fullDay:"Friday",value:"fri"}],D=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.events})),n=Object(s.c)((function(e){return e.showDeletePopUp})),r=Object(s.c)((function(e){return e.filterValue}));Object(a.useEffect)((function(){e(function(){var e=Object(N.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAllEvents();case 2:n=e.sent,t({type:i,events:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);var c=C.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"row",children:e.fullTime}),k.map((function(n){return Object(m.jsx)(_,{time:e.value,day:n.value,events:(a=t,c=r,"All members"===c?a:a.filter((function(e){return e.participants.includes(c)})))},"".concat(n.value).concat(e.value));var a,c}))]},e.value)}));return Object(m.jsxs)("div",{children:[n&&Object(m.jsx)(L,{confirmationPopup:n}),Object(m.jsxs)("table",{className:"table table-bordered text-center",children:[Object(m.jsx)("thead",{className:"table-secondary",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{scope:"col",children:"Name"},"name"),k.map((function(e){return Object(m.jsx)("th",{scope:"col",children:e.fullDay},e.fullDay)}))]})}),Object(m.jsx)("tbody",{children:c})]})]})},_=(n(69),function(e){var t=e.time,n=e.day,a=e.events,r=Object(s.b)(),c=Object(s.c)((function(e){return e.isAdmin})),i=a.find((function(e){return e.day===n&&e.time===t}));return void 0===i?Object(m.jsx)("td",{}):Object(m.jsx)("td",{className:"event",children:Object(m.jsxs)("div",{children:[i.eventText,c&&Object(m.jsx)("button",{type:"button","aria-label":"Close",className:"close",onClick:function(){return r(function(e){return{type:o,event:e}}(i))},children:Object(m.jsx)("span",{className:"delete-event",children:"\xd7"})})]})})}),A=n(17),F=n(12),S=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.showLoginPopUp}));return Object(m.jsx)("div",{children:Object(m.jsxs)(F.a,{show:t,backdrop:"static",keyboard:!1,centered:!0,children:[Object(m.jsx)(F.a.Header,{children:Object(m.jsx)(F.a.Title,{children:"Please authorize"})}),Object(m.jsx)(F.a.Body,{children:Object(m.jsx)("select",{className:"custom-select auth-select",onChange:function(t){var n;e((n=t.target.value,{type:d,user:n}))},children:Object(m.jsx)(U,{})})}),Object(m.jsx)(F.a.Footer,{children:Object(m.jsx)(A.a,{variant:"secondary",onClick:function(){e({type:b})},children:"Confirm"})})]})})},U=function(){var e=["Kate Prokofieva","Alex Prokofiev","Peter Smolic","Hana Carpenter"].map((function(e){return Object(m.jsx)("option",{value:e,children:e},e)}));return Object(m.jsx)(m.Fragment,{children:e})},L=function(e){var t=e.confirmationPopup,n=Object(s.b)(),a=Object(s.c)((function(e){return e.deletedEvent})),r=a.eventText,c=a.id;return Object(m.jsx)("div",{children:Object(m.jsxs)(F.a,{show:t,onHide:function(){return n(p())},keyboard:!1,centered:!0,children:[Object(m.jsx)(F.a.Body,{children:'Are you sure you want to delete "'.concat(r,'" event?')}),Object(m.jsxs)(F.a.Footer,{children:[Object(m.jsx)(A.a,{variant:"secondary",onClick:function(){return n(p())},children:"No"}),Object(m.jsx)(A.a,{variant:"secondary",onClick:function(){return n(function(e){return function(){var t=Object(N.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.deleteEvent(e);case 2:n({type:l,id:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))},children:"Yes"})]})]})})},B=n(4),V=n(15),H=(n(71),n(36)),I={events:[],isAdmin:!1,authUser:"Kate Prokofieva",filterValue:"All members",showEventForm:!1,showCalendar:!0,showErrorMessage:!1,showDeletePopUp:!1,showLoginPopUp:!0,isEventDuplicate:!1,newEvent:null,deletedEvent:{}},J=function(e,t){var n=e.events,a=n.findIndex((function(e){return e.id===t})),r=Object(H.a)(n);return r.splice(a,1),Object(B.a)(Object(B.a)({},e),{},{events:r,showDeletePopUp:!1})},K=function(e,t){return Object(B.a)(Object(B.a)({},e),{},{showDeletePopUp:!0,deletedEvent:t})},M=function(e){var t=e.authUser,n=g.find((function(e){return e.name===t}));return Object(B.a)(Object(B.a)({},e),{},{isAdmin:n.isAdmin,showLoginPopUp:!1})},R=function(e,t){var n=e.events.find((function(e){return e.day===t.day&&e.time===t.time}));return void 0===n?Object(B.a)(Object(B.a)({},e),{},{newEvent:t,isEventDuplicate:!1}):Object(B.a)(Object(B.a)({},e),{},{isEventDuplicate:!0})};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(B.a)(Object(B.a)({},e),{},{events:t.events});case o:return K(e,t.event);case l:return J(e,t.id);case u:return Object(B.a)(Object(B.a)({},e),{},{showDeletePopUp:!1,showEventForm:!1,showCalendar:!0});case j:return Object(B.a)(Object(B.a)({},e),{},{filterValue:t.user});case d:return Object(B.a)(Object(B.a)({},e),{},{authUser:t.user});case b:return M(e);case v:return Object(B.a)(Object(B.a)({},e),{},{showEventForm:!1,showCalendar:!0,isEventDuplicate:!1});case f:return Object(B.a)(Object(B.a)({},e),{},{showEventForm:!0,showCalendar:!1});case O:return R(e,t.event);default:return e}},q=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.newEvent})),n=Object(a.useState)({}),r=Object(V.a)(n,2),c=r[0],i=r[1],l=Object(a.useState)(!1),o=Object(V.a)(l,2),u=o[0],j=o[1],d=Object(a.useState)(!1),b=Object(V.a)(d,2),f=b[0],h=b[1],x=Object(a.useState)(!1),w=Object(V.a)(x,2),E=w[0],T=w[1],g=Object(a.useState)(!1),D=Object(V.a)(g,2),_=D[0],A=D[1];Object(a.useEffect)((function(){t&&e(function(e){return function(){var t=Object(N.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.postNewEvent(e);case 2:n({type:v});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))}),[e,t,c]);return Object(m.jsxs)("form",{id:"form",children:[Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{htmlFor:"inputNameEvent",className:"col-sm-2 col-form-label",children:"Name of the event:"}),Object(m.jsxs)("div",{className:"col-sm-10",children:[Object(m.jsx)("input",{type:"text",className:"form-control",id:"inputNameEvent",placeholder:"Name of the event:",required:!0,onChange:function(e){e.target.value&&(i(Object(B.a)(Object(B.a)({},c),{},{eventText:e.target.value})),j(!1))}}),u&&Object(m.jsx)("p",{className:"error",children:"Please fill in the text of the event"})]})]}),Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{htmlFor:"participants",className:"col-sm-2 col-form-label",children:"Participants:"}),Object(m.jsxs)("div",{className:"col-sm-10",children:[Object(m.jsx)("p",{className:"multiselect-tip",children:"Use 'cmd + click' to select multiple participants:"}),Object(m.jsx)("select",{id:"participants",size:"2",className:"form-control",multiple:!0,required:!0,onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return e.value}));t&&(i(Object(B.a)(Object(B.a)({},c),{},{participants:t})),h(!1))},children:Object(m.jsx)(U,{})}),f&&Object(m.jsx)("p",{className:"error",children:"Please select participants"})]})]}),Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{htmlFor:"day",className:"col-sm-2 col-form-label",children:"Day:"}),Object(m.jsxs)("div",{className:"col-sm-10",children:[Object(m.jsxs)("select",{id:"day",className:"form-control",required:!0,onChange:function(e){e.target.value.match("[a-z]{3}")&&(i(Object(B.a)(Object(B.a)({},c),{},{day:e.target.value})),T(!1))},children:[Object(m.jsx)("option",{value:"",children:"Choose..."}),k.map((function(e){return Object(m.jsx)("option",{value:e.value,children:e.fullDay},e.value)}))]}),E&&Object(m.jsx)("p",{className:"error",children:"Please select day"})]})]}),Object(m.jsxs)("div",{className:"form-group row",children:[Object(m.jsx)("label",{htmlFor:"time",className:"col-sm-2 col-form-label",children:"Time:"}),Object(m.jsxs)("div",{className:"col-sm-10",children:[Object(m.jsxs)("select",{id:"time",className:"form-control",required:!0,onChange:function(e){e.target.value.match("^[0-9]{2}$")&&(i(Object(B.a)(Object(B.a)({},c),{},{time:e.target.value})),A(!1))},children:[Object(m.jsx)("option",{value:"",children:"Choose..."}),C.map((function(e){return Object(m.jsx)("option",{value:e.value,children:e.fullTime},e.value)}))]}),_&&Object(m.jsx)("p",{className:"error",children:"Please select time"})]})]}),Object(m.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(m.jsx)("button",{id:"cancel",type:"reset",className:"btn btn-secondary mr-3",onClick:function(){return e(p())},children:"Cancel"}),Object(m.jsx)("button",{id:"create",type:"submit",className:"btn btn-secondary",onClick:function(t){var n=c.hasOwnProperty("eventText"),a=c.hasOwnProperty("participants"),r=c.hasOwnProperty("day"),s=c.hasOwnProperty("time");t.preventDefault(),n?a?r?s||A(!0):T(!0):h(!0):j(!0),n&&a&&r&&s&&e(function(e){return{type:O,event:e}}(c))},children:"Create"})]})]})},z=function(){var e=Object(s.c)((function(e){return e.showCalendar})),t=Object(s.c)((function(e){return e.showEventForm})),n=Object(s.c)((function(e){return e.isEventDuplicate}));return Object(m.jsxs)("div",{className:"container",children:[e&&Object(m.jsxs)("div",{className:"container-calendar",children:[Object(m.jsx)(S,{}),Object(m.jsx)(h,{}),Object(m.jsx)(D,{})]}),t&&Object(m.jsxs)("div",{className:"container-newEvent",children:[n&&Object(m.jsx)("div",{className:"alert alert-event alert-danger",role:"alert",children:"Failed to create an event. Time slot is already booked."}),Object(m.jsx)(q,{})]})]})},G=n(14),Y=n(34),$=n(35),Q=Object(G.createStore)(W,Object(Y.composeWithDevTools)(Object(G.applyMiddleware)($.a)));c.a.render(Object(m.jsx)(s.a,{store:Q,children:Object(m.jsx)(z,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.50712287.chunk.js.map