(this["webpackJsonpinternship-task-react"]=this["webpackJsonpinternship-task-react"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},42:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(12),s=n.n(r),i=n(19),l=n(10),o=n(7),u=n.n(o),d=n(13),j=n(5),b=(n(34),n(35),n(1)),m=function(e){var t=e.getFilteredUser,n=e.openNewEventForm,c=Object(a.useContext)(g);return Object(b.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(b.jsx)("h1",{children:"Calendar"}),Object(b.jsxs)("div",{className:"d-flex",children:[Object(b.jsx)("div",{className:"mr-3",children:Object(b.jsxs)("select",{className:"custom-select users-filter",onChange:function(e){t(e.target.value)},children:[Object(b.jsx)("option",{value:"All members",children:"All members"}),Object(b.jsx)(w,{})]})}),Object(b.jsx)("div",{children:c.isAdmin&&Object(b.jsx)("button",{type:"button",className:"btn btn-secondary new-event",onClick:function(){return n()},children:"New Event +"})})]})]})},v=(n(37),[{name:"Kate Prokofieva",isAdmin:!0,id:1},{name:"Alex Prokofiev",isAdmin:!1,id:2},{name:"Peter Smolic",isAdmin:!1,id:3},{name:"Hana Carpenter",isAdmin:!1,id:4}]),f=[{fullTime:"10:00",value:"10"},{fullTime:"11:00",value:"11"},{fullTime:"12:00",value:"12"},{fullTime:"13:00",value:"13"},{fullTime:"14:00",value:"14"},{fullTime:"15:00",value:"15"},{fullTime:"16:00",value:"16"},{fullTime:"17:00",value:"17"},{fullTime:"18:00",value:"18"}],O=[{fullDay:"Monday",value:"mon"},{fullDay:"Tuesday",value:"tue"},{fullDay:"Wednesday",value:"wed"},{fullDay:"Thursday",value:"thu"},{fullDay:"Friday",value:"fri"}],h=function(e){var t=e.eventsFromServer,n=e.deleteById,a=["cell-mon-","cell-tue-","cell-wed-","cell-thu-","cell-fri-"],c=f.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"row",children:e.fullTime}),a.map((function(a){return Object(b.jsx)(p,{className:a,time:e.value,eventsFromServer:t,deleteById:n},a)}))]},e.value+Math.floor(100*Math.random()))}));return Object(b.jsxs)("table",{className:"table table-bordered text-center",children:[Object(b.jsx)("thead",{className:"table-secondary",children:Object(b.jsx)("tr",{children:["Name","Mon","Tue","Wed","Thu","Fri"].map((function(e){return Object(b.jsx)("th",{scope:"col",children:e},e)}))})}),Object(b.jsx)("tbody",{children:c})]})},p=(n(38),function(e){var t=e.className,n=e.time,c=e.eventsFromServer,r=e.deleteById,s=Object(a.useState)(!1),i=Object(j.a)(s,2),l=i[0],o=i[1],u=Object(a.useContext)(g),d="".concat(t).concat(n),m=c.find((function(e){return d==="cell-".concat(e.day,"-").concat(e.time)}));return void 0!==m?Object(b.jsx)("td",{className:"".concat(d," event"),children:Object(b.jsxs)("div",{id:d,children:[m.eventText,u.isAdmin&&Object(b.jsx)("button",{type:"button",id:"delete-event",className:"close","aria-label":"Close",onClick:function(){o(!l)},children:Object(b.jsx)("span",{className:"delete-event",children:"\xd7"})}),l&&Object(b.jsx)(k,{eventTitle:m.eventText,eventId:m.id,deleteById:r})]})}):Object(b.jsx)("td",{className:d})}),x=n(15),y=n(9),N=function(e){var t=e.getAuthUser,n=Object(a.useState)(!0),c=Object(j.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)("Kate Prokofieva"),l=Object(j.a)(i,2),o=l[0],u=l[1],d=function(){return s(!1)};return Object(b.jsx)("div",{children:Object(b.jsxs)(y.a,{show:r,onHide:d,backdrop:"static",keyboard:!1,centered:!0,children:[Object(b.jsx)(y.a.Header,{closeButton:!0,children:Object(b.jsx)(y.a.Title,{children:"Please authorize"})}),Object(b.jsx)(y.a.Body,{children:Object(b.jsx)("select",{className:"custom-select auth-select",onChange:function(e){return u((function(){return e.target.value}))},children:Object(b.jsx)(w,{})})}),Object(b.jsx)(y.a.Footer,{children:Object(b.jsx)(x.a,{variant:"secondary",onClick:function(){d(),t(o)},children:"Confirm"})})]})})},w=function(){var e=["Kate Prokofieva","Alex Prokofiev","Peter Smolic","Hana Carpenter"].map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}));return Object(b.jsx)(b.Fragment,{children:e})},g=c.a.createContext(),k=function(e){var t=e.eventTitle,n=e.eventId,c=e.deleteById,r=Object(a.useState)(!0),s=Object(j.a)(r,2),i=s[0],l=s[1],o=function(){return l(!1)};return Object(b.jsx)("div",{children:Object(b.jsxs)(y.a,{show:i,onHide:o,keyboard:!1,centered:!0,children:[Object(b.jsx)(y.a.Header,{closeButton:!0,children:Object(b.jsx)(y.a.Title,{children:"Please authorize"})}),Object(b.jsx)(y.a.Body,{children:'Are you sure you want to delete "'.concat(t,'" event?')}),Object(b.jsxs)(y.a.Footer,{children:[Object(b.jsx)(x.a,{variant:"secondary",onClick:function(){return o()},children:"No"}),Object(b.jsx)(x.a,{variant:"secondary",onClick:function(){return c(n)},children:"Yes"})]})]})})},T=(n(42),function(e){var t=e.getNewEvent,n=e.onCancelNewEvent,c=Object(a.useState)({}),r=Object(j.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),u=Object(j.a)(o,2),d=u[0],m=u[1],v=Object(a.useState)(!1),h=Object(j.a)(v,2),p=h[0],x=h[1],y=Object(a.useState)(!1),N=Object(j.a)(y,2),g=N[0],k=N[1],T=Object(a.useState)(!1),C=Object(j.a)(T,2),S=C[0],E=C[1];return Object(b.jsxs)("form",{id:"form",children:[Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"inputNameEvent",className:"col-sm-2 col-form-label",children:"Name of the event:"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsx)("input",{type:"text",className:"form-control",id:"inputNameEvent",placeholder:"Name of the event:",required:!0,onChange:function(e){e.target.value&&(i(Object(l.a)(Object(l.a)({},s),{},{eventText:e.target.value})),m(!1))}}),d&&Object(b.jsx)("p",{className:"error",children:"Please fill in the text of the event"})]})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"participants",className:"col-sm-2 col-form-label",children:"Participants:"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsx)("p",{className:"multiselect-tip",children:"Use 'cmd + click' to select multiple participants:"}),Object(b.jsx)("select",{id:"participants",size:"2",className:"form-control",multiple:!0,required:!0,onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return e.value}));t&&(i(Object(l.a)(Object(l.a)({},s),{},{participants:t})),x(!1))},children:Object(b.jsx)(w,{})}),p&&Object(b.jsx)("p",{className:"error",children:"Please select participants"})]})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"day",className:"col-sm-2 col-form-label",children:"Day:"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsxs)("select",{id:"day",className:"form-control",required:!0,onChange:function(e){e.target.value.match("[a-z]{3}")&&(i(Object(l.a)(Object(l.a)({},s),{},{day:e.target.value})),k(!1))},children:[Object(b.jsx)("option",{value:"",children:"Choose..."}),O.map((function(e){return Object(b.jsx)("option",{value:e.value,children:e.fullDay},e.value)}))]}),g&&Object(b.jsx)("p",{className:"error",children:"Please select day"})]})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{htmlFor:"time",className:"col-sm-2 col-form-label",children:"Time:"}),Object(b.jsxs)("div",{className:"col-sm-10",children:[Object(b.jsxs)("select",{id:"time",className:"form-control",required:!0,onChange:function(e){e.target.value.match("^[0-9]{2}$")&&(i(Object(l.a)(Object(l.a)({},s),{},{time:e.target.value})),E(!1))},children:[Object(b.jsx)("option",{value:"",children:"Choose..."}),f.map((function(e){return Object(b.jsx)("option",{value:e.value,children:e.fullTime},e.value)}))]}),S&&Object(b.jsx)("p",{className:"error",children:"Please select time"})]})]}),Object(b.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(b.jsx)("button",{id:"cancel",type:"reset",className:"btn btn-secondary mr-3",onClick:n,children:"Cancel"}),Object(b.jsx)("button",{id:"create",type:"submit",className:"btn btn-secondary",onClick:function(e){var n=s.hasOwnProperty("eventText"),a=s.hasOwnProperty("participants"),c=s.hasOwnProperty("day"),r=s.hasOwnProperty("time");e.preventDefault(),n?a?c?r||E(!0):k(!0):x(!0):m(!0),n&&a&&c&&r&&t(s)},children:"Create"})]})]})}),C=n(28),S=n(16),E=n.n(S),P=new function e(){var t=this;Object(C.a)(this,e),this._apiBase="http://158.101.166.74:8080/api/data/prokofievaK/event",this.postNewEvent=function(){var e=Object(d.a)(u.a.mark((function e(n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(t._apiBase,t._createDataObj(n));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllEvents=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(t._apiBase);case 2:if(null!==(n=e.sent).data){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",n.data.map(t._transformEvents));case 8:case"end":return e.stop()}}),e)}))),this.deleteEvent=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.delete("".concat(t._apiBase,"/").concat(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.putEvent=function(){var e=Object(d.a)(u.a.mark((function e(n,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put("".concat(t._apiBase,"/").concat(n),t._createDataObj(a));case 2:return c=e.sent,e.abrupt("return",t._transformEvent(c));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this._transformEvents=function(e){var t=JSON.parse(e.data),n=t.eventText,a=t.day,c=t.time,r=t.participants;return{id:e.id,eventText:n,day:a,time:c,participants:r}},this._transformEvent=function(e){var t=JSON.parse(e.data.data);return{eventText:t.eventText,day:t.day,time:t.time,participants:t.participants}},this._createDataObj=function(e){return JSON.stringify({data:JSON.stringify(e),id:"test"})}},F=function(){var e=Object(a.useState)("Kate Prokofieva"),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(j.a)(r,2),o=s[0],f=s[1],O=Object(a.useState)([]),p=Object(j.a)(O,2),x=p[0],y=p[1],w=Object(a.useState)("All members"),k=Object(j.a)(w,2),C=k[0],S=k[1],E=Object(a.useState)(!1),F=Object(j.a)(E,2),A=F[0],B=F[1],_=Object(a.useState)(!1),D=Object(j.a)(_,2),I=D[0],H=D[1];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getAllEvents();case 3:t=e.sent,y(t),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var J,K,U=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.deleteEvent(t);case 3:n=x.findIndex((function(e){return e.id===t})),(a=Object(i.a)(x)).splice(n,1),y(a),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return A?Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"container-newEvent",children:[I&&Object(b.jsx)("div",{className:"alert alert-event alert-danger",role:"alert",children:"Failed to create an event. Time slot is already booked."}),Object(b.jsx)(T,{getNewEvent:function(e){void 0===x.find((function(t){return t.day===e.day&&t.time===e.time}))?(P.postNewEvent(e).then((function(t){var n=Object(l.a)(Object(l.a)({},e),{},{id:t.id});y((function(e){return[].concat(Object(i.a)(e),[n])}))})),B(!1)):H(!0)},eventsFromServer:x,onCancelNewEvent:function(){B(!1)}})]})}):Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(g.Provider,{value:n,children:Object(b.jsxs)("div",{className:"container-calendar",children:[!o&&Object(b.jsx)(N,{getAuthUser:function(e){var t=v.find((function(t){return t.name===e}));c(t),f(!0)}}),Object(b.jsx)(m,{getFilteredUser:function(e){S(e)},openNewEventForm:function(){B(!0)}}),Object(b.jsx)(h,{eventsFromServer:(J=x,K=C,"All members"===K?J:J.filter((function(e){return e.participants.includes(K)}))),deleteById:U})]})})})};s.a.render(Object(b.jsx)(F,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.e1fd4d03.chunk.js.map